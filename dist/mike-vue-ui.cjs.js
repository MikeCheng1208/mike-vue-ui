"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue");function M(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function V(t){return typeof t=="function"?t():e.unref(t)}const T=typeof window<"u",S=()=>{},N=C();function C(){var t;return T&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function b(t){var d;const u=V(t);return(d=u==null?void 0:u.$el)!=null?d:u}const $=T?window:void 0;function w(...t){let d,u,l,n;if(typeof t[0]=="string"||Array.isArray(t[0])?([u,l,n]=t,d=$):[d,u,l,n]=t,!d)return S;Array.isArray(u)||(u=[u]),Array.isArray(l)||(l=[l]);const m=[],v=()=>{m.forEach(c=>c()),m.length=0},g=(c,a,o,i)=>(c.addEventListener(a,o,i),()=>c.removeEventListener(a,o,i)),p=e.watch(()=>[b(d),V(n)],([c,a])=>{v(),c&&m.push(...u.flatMap(o=>l.map(i=>g(c,o,i,a))))},{immediate:!0,flush:"post"}),h=()=>{p(),v()};return M(h),h}let I=!1;function D(t,d,u={}){const{window:l=$,ignore:n=[],capture:m=!0,detectIframe:v=!1}=u;if(!l)return;N&&!I&&(I=!0,Array.from(l.document.body.children).forEach(o=>o.addEventListener("click",S)));let g=!0;const p=o=>n.some(i=>{if(typeof i=="string")return Array.from(l.document.querySelectorAll(i)).some(y=>y===o.target||o.composedPath().includes(y));{const y=b(i);return y&&(o.target===y||o.composedPath().includes(y))}}),c=[w(l,"click",o=>{const i=b(t);if(!(!i||i===o.target||o.composedPath().includes(i))){if(o.detail===0&&(g=!p(o)),!g){g=!0;return}d(o)}},{passive:!0,capture:m}),w(l,"pointerdown",o=>{const i=b(t);i&&(g=!o.composedPath().includes(i)&&!p(o))},{passive:!0}),v&&w(l,"blur",o=>{setTimeout(()=>{var i;const y=b(t);((i=l.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(y!=null&&y.contains(l.document.activeElement))&&d(o)},0)})].filter(Boolean);return()=>c.forEach(o=>o())}const E=(t,d)=>{const u=t.__vccOpts||t;for(const[l,n]of d)u[l]=n;return u},L={relative:"","w-full":"","h-30px":""},P=["value"],x={key:0,absolute:"","top-30px":"","left-0":"","bg-white":"","w-full":"","h-auto":"",border:"0px x-1px gray-4 solid"},F=["onClick"],O={__name:"MEmailInput",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(t,{emit:d}){const u=t,l=e.ref(null),n=e.ref(!1),m=e.ref(!1);D(l,c=>{n.value=!1});const v=e.computed(()=>u.options.suffix?u.options.suffix.map(c=>u.modelValue.split("@")[0]+c):[]),g=c=>{d("update:modelValue",c)},p=()=>{n.value=u.modelValue.length!==0},h=c=>{m.value=!0,n.value=!1,g(c),setTimeout(()=>{m.value=!1},300)};return e.watch(()=>u.modelValue,()=>{m.value||(n.value=u.modelValue.length!==0)}),(c,a)=>(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("input",{ref_key:"inputRef",ref:l,"w-full":"","h-full":"","pl-10px":"",value:t.modelValue,border:"1px gray-4 solid",onInput:a[0]||(a[0]=o=>g(o.target.value)),onFocus:p},null,40,P),n.value?(e.openBlock(),e.createElementBlock("ul",x,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,o=>(e.openBlock(),e.createElementBlock("li",{key:o,border:"0px b-1px gray-4 solid"},[e.createElementVNode("a",{"cursor-pointer":"","w-full":"",block:"","py-5px":"","pl-10px":"","text-14px":"","hover:bg-gray-1":"",onClick:i=>h(o)},e.toDisplayString(o),9,F)]))),128))])):e.createCommentVNode("",!0)]))}},R=E(O,[["__scopeId","data-v-7a0cd896"]]);const j={class:"vue-pure-table"},z={id:"columns"},K={id:"rows",class:"flex-col"},W={key:0},q={__name:"MPureTable",props:{columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]}},setup(t){const d=t,u=e.useSlots(),l=e.computed(()=>d.columns.map(v=>v.field)),n=e.computed(()=>d.rows.map(v=>{const g=[];return Object.keys(v).forEach((p,h)=>{l.value[h]&&g.push(v[l.value[h]])}),g})),m=v=>Object.keys(u).includes(v);return(v,g)=>(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("ul",z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.columns,p=>(e.openBlock(),e.createElementBlock("li",{key:p.label,class:"table_columns",style:e.normalizeStyle(p.style)},e.toDisplayString(p.label),5))),128))]),e.createElementVNode("ul",K,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(p,h)=>(e.openBlock(),e.createElementBlock("li",{key:h},[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p,(c,a)=>(e.openBlock(),e.createElementBlock("li",{key:c.id,style:e.normalizeStyle(d.columns[a].style)},[m(d.columns[a].field)?e.renderSlot(v.$slots,d.columns[a].field,{key:1,data:{rowData:c,rowTarget:n.value[h]}},void 0,!0):(e.openBlock(),e.createElementBlock("p",W,e.toDisplayString(c),1))],4))),128))])]))),128))])]))}},J=E(q,[["__scopeId","data-v-947644cc"]]);const U=["aria-label"],G=["value","disabled","aria-label","onInput","onKeydown","onFocus","onClick"],H={__name:"MPinInput",props:{length:{type:Number,default:5,validator:t=>t>0&&t<=10},disabled:{type:Boolean,default:!1},modelValue:{type:String,default:""}},emits:["update:modelValue","complete","change"],setup(t,{expose:d,emit:u}){const l=t,n=e.ref([]),m=e.ref(0),v=e.ref([]),g=()=>{if(n.value=new Array(l.length).fill(""),l.modelValue){l.modelValue.split("").slice(0,l.length).forEach((f,_)=>{/^\d$/.test(f)&&(n.value[_]=f)});const s=n.value.findIndex(f=>f==="");m.value=s===-1?l.length-1:s}},p=e.computed(()=>n.value.join(""));e.watch(()=>l.length,()=>{g()},{immediate:!0}),e.watch(()=>l.modelValue,r=>{r!==p.value&&g()}),e.watch(p,r=>{u("update:modelValue",r),r.length===l.length&&r.split("").every(s=>/^\d$/.test(s))&&u("complete",r)});const h=(r,s)=>{r&&(v.value[s]=r)},c=r=>{r>=0&&r<l.length&&v.value[r]&&(v.value[r].focus(),m.value=r)},a=r=>/^\d$/.test(r),o=(r,s)=>{if(l.disabled)return;const f=r.target.value,_=f.slice(-1);if(_&&!a(_)){r.target.value=n.value[s];return}_&&a(_)?(n.value[s]=_,u("change",p.value,s),s<l.length-1&&e.nextTick(()=>{c(s+1)})):f===""&&(n.value[s]="",u("change",p.value,s))},i=(r,s)=>{if(l.disabled)return;const{key:f}=r;if(f==="Backspace"){r.preventDefault(),n.value[s]!==""?(n.value[s]="",u("change",p.value,s)):s>0&&(n.value[s-1]="",u("change",p.value,s-1),e.nextTick(()=>{c(s-1)}));return}if(f==="Delete"){r.preventDefault(),n.value[s]="",u("change",p.value,s);return}if(f==="ArrowLeft"&&s>0){r.preventDefault(),c(s-1);return}if(f==="ArrowRight"&&s<l.length-1){r.preventDefault(),c(s+1);return}if(a(f)){r.preventDefault(),n.value[s]=f,u("change",p.value,s),s<l.length-1&&e.nextTick(()=>{c(s+1)});return}!/^(Tab|Shift|Control|Alt|Meta|CapsLock)$/.test(f)&&!f.startsWith("Arrow")&&r.preventDefault()},y=r=>{l.disabled||(m.value=r)},B=r=>{l.disabled||c(r)};return d({focus:r=>{if(typeof r=="number")c(r);else{const s=n.value.findIndex(_=>_===""),f=s===-1?l.length-1:s;c(f)}},clear:()=>{n.value=new Array(l.length).fill(""),m.value=0,e.nextTick(()=>{c(0)})},getValue:()=>p.value,setValue:r=>{if(typeof r!="string")return;n.value=new Array(l.length).fill(""),r.split("").slice(0,l.length).forEach((k,A)=>{a(k)&&(n.value[A]=k)});const f=n.value.findIndex(k=>k===""),_=f===-1?l.length-1:f;e.nextTick(()=>{c(_)})}}),(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:"m-pin-input",role:"group","aria-label":`密碼輸入，共 ${t.length} 位數`},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(f,_)=>(e.openBlock(),e.createElementBlock("input",{key:_,ref_for:!0,ref:k=>h(k,_),value:f,type:"text",inputmode:"numeric",autocomplete:"off",maxlength:"1",class:e.normalizeClass(["m-pin-input__item",{"m-pin-input__item--focused":m.value===_,"m-pin-input__item--filled":f!=="","m-pin-input__item--disabled":t.disabled}]),disabled:t.disabled,"aria-label":`第 ${_+1} 位數字`,onInput:k=>o(k,_),onKeydown:k=>i(k,_),onFocus:k=>y(_),onClick:k=>B(_)},null,42,G))),128))],8,U))}},Q=E(H,[["__scopeId","data-v-5aece818"]]);const X={class:"m-input-tags__container"},Y=["aria-label"],Z=["title"],ee=["aria-label","disabled","onClick"],te=["placeholder","disabled","aria-label"],le={__name:"MInputTags",props:{modelValue:{type:Array,default:()=>[],validator:t=>Array.isArray(t)&&t.every(d=>typeof d=="string")},disabled:{type:Boolean,default:!1},maxTags:{type:Number,default:null,validator:t=>t===null||typeof t=="number"&&t>0},maxTagLength:{type:Number,default:150,validator:t=>typeof t=="number"&&t>0},placeholder:{type:String,default:"輸入後按 Enter 新增標籤"}},emits:["update:modelValue","add","remove","limit-reached"],setup(t,{expose:d,emit:u}){const l=t,n=e.ref([]),m=e.ref(""),v=e.ref(null),g=e.computed(()=>l.maxTags!==null&&n.value.length>=l.maxTags);e.computed(()=>!l.disabled&&!g.value),e.watch(()=>l.modelValue,a=>{JSON.stringify(a)!==JSON.stringify(n.value)&&(n.value=[...a])},{immediate:!0,deep:!0}),e.watch(n,a=>{u("update:modelValue",a)},{deep:!0});const p=a=>{const o=a.trim();if(o){if(g.value){u("limit-reached");return}o.length>l.maxTagLength||(n.value.push(o),u("add",o),m.value="")}},h=a=>{a.key==="Enter"&&(a.preventDefault(),p(m.value))},c=a=>{if(a<0||a>=n.value.length)return;const o=n.value[a];n.value.splice(a,1),u("remove",o,a)};return d({focus:()=>{var a;(a=v.value)==null||a.focus()},clear:()=>{n.value=[],u("update:modelValue",[])},addTag:a=>{p(a)},removeTag:a=>{c(a)},getTags:()=>[...n.value]}),(a,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["m-input-tags",{"m-input-tags--disabled":t.disabled}]),role:"group","aria-label":"標籤輸入"},[e.createElementVNode("div",X,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(i,y)=>(e.openBlock(),e.createElementBlock("div",{key:y,class:"m-input-tags__tag",role:"listitem","aria-label":`標籤: ${i}`},[e.createElementVNode("span",{class:"m-input-tags__tag-text",title:i},e.toDisplayString(i),9,Z),e.createElementVNode("button",{type:"button",class:"m-input-tags__tag-remove","aria-label":`移除標籤 ${i}`,disabled:t.disabled,onClick:B=>c(y)}," × ",8,ee)],8,Y))),128)),e.withDirectives(e.createElementVNode("input",{ref_key:"inputRef",ref:v,"onUpdate:modelValue":o[0]||(o[0]=i=>m.value=i),type:"text",class:"m-input-tags__input",placeholder:g.value?"已達標籤數量上限":t.placeholder,disabled:t.disabled||g.value,"aria-label":t.placeholder,onKeydown:h},null,40,te),[[e.vModelText,m.value]])])],2))}},ne=E(le,[["__scopeId","data-v-82d29b24"]]);exports.MEmailInput=R;exports.MInputTags=ne;exports.MPinInput=Q;exports.MPureTable=J;
