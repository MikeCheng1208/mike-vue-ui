"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue");function P(o){return e.getCurrentScope()?(e.onScopeDispose(o),!0):!1}function I(o){return typeof o=="function"?o():e.unref(o)}const V=typeof window<"u",S=()=>{},T=C();function C(){var o;return V&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function b(o){var i;const r=I(o);return(i=r==null?void 0:r.$el)!=null?i:r}const A=V?window:void 0;function E(...o){let i,r,t,a;if(typeof o[0]=="string"||Array.isArray(o[0])?([r,t,a]=o,i=A):[i,r,t,a]=o,!i)return S;Array.isArray(r)||(r=[r]),Array.isArray(t)||(t=[t]);const _=[],m=()=>{_.forEach(u=>u()),_.length=0},h=(u,v,s,f)=>(u.addEventListener(v,s,f),()=>u.removeEventListener(v,s,f)),p=e.watch(()=>[b(i),I(a)],([u,v])=>{m(),u&&_.push(...r.flatMap(s=>t.map(f=>h(u,s,f,v))))},{immediate:!0,flush:"post"}),y=()=>{p(),m()};return P(y),y}let B=!1;function D(o,i,r={}){const{window:t=A,ignore:a=[],capture:_=!0,detectIframe:m=!1}=r;if(!t)return;T&&!B&&(B=!0,Array.from(t.document.body.children).forEach(s=>s.addEventListener("click",S)));let h=!0;const p=s=>a.some(f=>{if(typeof f=="string")return Array.from(t.document.querySelectorAll(f)).some(k=>k===s.target||s.composedPath().includes(k));{const k=b(f);return k&&(s.target===k||s.composedPath().includes(k))}}),u=[E(t,"click",s=>{const f=b(o);if(!(!f||f===s.target||s.composedPath().includes(f))){if(s.detail===0&&(h=!p(s)),!h){h=!0;return}i(s)}},{passive:!0,capture:_}),E(t,"pointerdown",s=>{const f=b(o);f&&(h=!s.composedPath().includes(f)&&!p(s))},{passive:!0}),m&&E(t,"blur",s=>{setTimeout(()=>{var f;const k=b(o);((f=t.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(k!=null&&k.contains(t.document.activeElement))&&i(s)},0)})].filter(Boolean);return()=>u.forEach(s=>s())}const w=(o,i)=>{const r=o.__vccOpts||o;for(const[t,a]of i)r[t]=a;return r},L={relative:"","w-full":"","h-30px":""},F=["value"],N={key:0,absolute:"","top-30px":"","left-0":"","bg-white":"","w-full":"","h-auto":"",border:"0px x-1px gray-4 solid"},O=["onClick"],x={__name:"MEmailInput",props:{modelValue:{type:String,default:""},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(o,{emit:i}){const r=o,t=e.ref(null),a=e.ref(!1),_=e.ref(!1);D(t,u=>{a.value=!1});const m=e.computed(()=>r.options.suffix?r.options.suffix.map(u=>r.modelValue.split("@")[0]+u):[]),h=u=>{i("update:modelValue",u)},p=()=>{a.value=r.modelValue.length!==0},y=u=>{_.value=!0,a.value=!1,h(u),setTimeout(()=>{_.value=!1},300)};return e.watch(()=>r.modelValue,()=>{_.value||(a.value=r.modelValue.length!==0)}),(u,v)=>(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("input",{ref_key:"inputRef",ref:t,"w-full":"","h-full":"","pl-10px":"",value:o.modelValue,border:"1px gray-4 solid",onInput:v[0]||(v[0]=s=>h(s.target.value)),onFocus:p},null,40,F),a.value?(e.openBlock(),e.createElementBlock("ul",N,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,s=>(e.openBlock(),e.createElementBlock("li",{key:s,border:"0px b-1px gray-4 solid"},[e.createElementVNode("a",{"cursor-pointer":"","w-full":"",block:"","py-5px":"","pl-10px":"","text-14px":"","hover:bg-gray-1":"",onClick:f=>y(s)},e.toDisplayString(s),9,O)]))),128))])):e.createCommentVNode("",!0)]))}},R=w(x,[["__scopeId","data-v-5d750eee"]]);const j={class:"vue-pure-table"},z={id:"columns"},W={id:"rows",class:"flex-col"},K={key:0},q={__name:"MPureTable",props:{columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]}},setup(o){const i=o,r=e.useSlots(),t=e.computed(()=>i.columns.map(m=>m.field)),a=e.computed(()=>i.rows.map(m=>{const h=[];return Object.keys(m).forEach((p,y)=>{t.value[y]&&h.push(m[t.value[y]])}),h})),_=m=>Object.keys(r).includes(m);return(m,h)=>(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("ul",z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.columns,p=>(e.openBlock(),e.createElementBlock("li",{key:p.label,class:"table_columns",style:e.normalizeStyle(p.style)},e.toDisplayString(p.label),5))),128))]),e.createElementVNode("ul",W,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(p,y)=>(e.openBlock(),e.createElementBlock("li",{key:y},[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p,(u,v)=>(e.openBlock(),e.createElementBlock("li",{key:u.id,style:e.normalizeStyle(i.columns[v].style)},[_(i.columns[v].field)?e.renderSlot(m.$slots,i.columns[v].field,{key:1,data:{rowData:u,rowTarget:a.value[y]}},void 0,!0):(e.openBlock(),e.createElementBlock("p",K,e.toDisplayString(u),1))],4))),128))])]))),128))])]))}},G=w(q,[["__scopeId","data-v-38a75e1e"]]);const H=["aria-label"],J=["value","disabled","aria-label","onInput","onKeydown","onFocus","onClick"],Q={__name:"MPinInput",props:{length:{type:Number,default:5,validator:o=>o>0&&o<=10},disabled:{type:Boolean,default:!1},modelValue:{type:String,default:""}},emits:["update:modelValue","complete","change"],setup(o,{expose:i,emit:r}){const t=o,a=e.ref([]),_=e.ref(0),m=e.ref([]),h=()=>{if(a.value=new Array(t.length).fill(""),t.modelValue){t.modelValue.split("").slice(0,t.length).forEach((c,d)=>{/^\d$/.test(c)&&(a.value[d]=c)});const n=a.value.findIndex(c=>c==="");_.value=n===-1?t.length-1:n}},p=e.computed(()=>a.value.join(""));e.watch(()=>t.length,()=>{h()},{immediate:!0}),e.watch(()=>t.modelValue,l=>{l!==p.value&&h()}),e.watch(p,l=>{r("update:modelValue",l),l.length===t.length&&l.split("").every(n=>/^\d$/.test(n))&&r("complete",l)});const y=(l,n)=>{l&&(m.value[n]=l)},u=l=>{l>=0&&l<t.length&&m.value[l]&&(m.value[l].focus(),_.value=l)},v=l=>/^\d$/.test(l),s=(l,n)=>{if(t.disabled)return;const c=l.target.value,d=c.slice(-1);if(d&&!v(d)){l.target.value=a.value[n];return}d&&v(d)?(a.value[n]=d,r("change",p.value,n),n<t.length-1&&e.nextTick(()=>{u(n+1)})):c===""&&(a.value[n]="",r("change",p.value,n))},f=(l,n)=>{if(t.disabled)return;const{key:c}=l;if(c==="Backspace"){l.preventDefault(),a.value[n]!==""?(a.value[n]="",r("change",p.value,n)):n>0&&(a.value[n-1]="",r("change",p.value,n-1),e.nextTick(()=>{u(n-1)}));return}if(c==="Delete"){l.preventDefault(),a.value[n]="",r("change",p.value,n);return}if(c==="ArrowLeft"&&n>0){l.preventDefault(),u(n-1);return}if(c==="ArrowRight"&&n<t.length-1){l.preventDefault(),u(n+1);return}if(v(c)){l.preventDefault(),a.value[n]=c,r("change",p.value,n),n<t.length-1&&e.nextTick(()=>{u(n+1)});return}!/^(Tab|Shift|Control|Alt|Meta|CapsLock)$/.test(c)&&!c.startsWith("Arrow")&&l.preventDefault()},k=l=>{t.disabled||(_.value=l)},$=l=>{t.disabled||u(l)};return i({focus:l=>{if(typeof l=="number")u(l);else{const n=a.value.findIndex(d=>d===""),c=n===-1?t.length-1:n;u(c)}},clear:()=>{a.value=new Array(t.length).fill(""),_.value=0,e.nextTick(()=>{u(0)})},getValue:()=>p.value,setValue:l=>{if(typeof l!="string")return;a.value=new Array(t.length).fill(""),l.split("").slice(0,t.length).forEach((g,M)=>{v(g)&&(a.value[M]=g)});const c=a.value.findIndex(g=>g===""),d=c===-1?t.length-1:c;e.nextTick(()=>{u(d)})}}),(l,n)=>(e.openBlock(),e.createElementBlock("div",{class:"m-pin-input",role:"group","aria-label":`密碼輸入，共 ${o.length} 位數`},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(c,d)=>(e.openBlock(),e.createElementBlock("input",{key:d,ref_for:!0,ref:g=>y(g,d),value:c,type:"text",inputmode:"numeric",autocomplete:"off",maxlength:"1",class:e.normalizeClass(["m-pin-input__item",{"m-pin-input__item--focused":_.value===d,"m-pin-input__item--filled":c!=="","m-pin-input__item--disabled":o.disabled}]),disabled:o.disabled,"aria-label":`第 ${d+1} 位數字`,onInput:g=>s(g,d),onKeydown:g=>f(g,d),onFocus:g=>k(d),onClick:g=>$(d)},null,42,J))),128))],8,H))}},U=w(Q,[["__scopeId","data-v-37a7c5a2"]]);exports.MEmailInput=R;exports.MPinInput=U;exports.MPureTable=G;
